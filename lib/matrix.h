/*==============================================================================

	Title		: MATRIX
	Description :
	Date		:
	Author		:

--------------------------------------------------------------------------------

==============================================================================*/



#pragma once
#ifndef _MATRIX_H_
#define _MATRIX_H_


/*------------------------------------------------------------------------------
* include널
------------------------------------------------------------------------------*/
#include <memory>
#include "vector.h"

/*------------------------------------------------------------------------------
* define널
------------------------------------------------------------------------------*/
#define M33xM33(row, column, a, b) a._##row##1 * b._##1##column + a._##row##2 * b._##2##column + a._##row##3 * b._##3##column
#define M44xM44(row, column, a, b) a._##row##1 * b._##1##column + a._##row##2 * b._##2##column + a._##row##3 * b._##3##column + a._##row##4 * b._##4##column

/*------------------------------------------------------------------------------
* extern널
------------------------------------------------------------------------------*/


/*------------------------------------------------------------------------------
* prototype널
------------------------------------------------------------------------------*/


/*------------------------------------------------------------------------------
* enum널
------------------------------------------------------------------------------*/


/*------------------------------------------------------------------------------
* class널
------------------------------------------------------------------------------*/
struct Matrix3x3 {
	union {
		struct {
			float m[3][3];
			struct {
				float _11;
				float _12;
				float _13;
				float _21;
				float _22;
				float _23;
				float _31;
				float _32;
				float _33;
			};
			Vector3 v[3];
		};
	};

	Matrix3x3() { memset(this, 0, sizeof(*this)); }
	Matrix3x3(
		float _11, float _12, float _13,
		float _21, float _22, float _23,
		float _31, float _32, float _33) :
		_11(_11), _12(_12), _13(_13),
		_21(_21), _22(_22), _23(_23),
		_31(_31), _32(_32), _33(_33) { }
	Matrix3x3(
		Vector3 a, Vector3 b, Vector3 c) :
		_11(a.x), _12(a.y), _13(a.z),
		_21(b.x), _22(b.y), _23(b.z),
		_31(c.x), _32(c.y), _33(c.z) { }

	friend Matrix3x3 operator+(Matrix3x3 &a, Matrix3x3 &b) {
		return {
		a.v[0] + b.v[0],
		a.v[1] + b.v[1],
		a.v[2] + b.v[2],
		};
	}
	friend Matrix3x3 operator-(Matrix3x3 &a, Matrix3x3 &b) {
		return {
		a.v[0] - b.v[0],
		a.v[1] - b.v[1],
		a.v[2] - b.v[2],
		};
	}
	friend Matrix3x3 operator*(Matrix3x3 &a, Matrix3x3 &b) {
		return {
			M33xM33(1, 1, a, b), M33xM33(1, 2, a, b), M33xM33(1, 3, a, b),
			M33xM33(2, 1, a, b), M33xM33(2, 2, a, b), M33xM33(2, 3, a, b),
			M33xM33(3, 1, a, b), M33xM33(3, 2, a, b), M33xM33(3, 3, a, b)
		};
	}
};

#endif
